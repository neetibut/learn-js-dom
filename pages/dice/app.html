<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dice Roller</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- custom shake animation -->
    <style>
      @keyframes shake {
        10%,
        90% {
          transform: translate3d(-1px, 0, 0);
        }
        20%,
        80% {
          transform: translate3d(2px, 0, 0);
        }
        30%,
        70% {
          transform: translate3d(-4px, 0, 0);
        }
        40%,
        60% {
          transform: translate3d(4px, 0, 0);
        }
        50% {
          transform: translate3d(-4px, 0, 0);
        }
      }
      .animate-shake {
        animation: shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
      }
    </style>
  </head>
  <body
    class="bg-gray-100 flex items-center justify-center min-h-screen p-4 font-inter"
  >
    <div
      class="bg-white p-8 rounded-2xl shadow-xl flex flex-col items-center w-full max-w-md"
    >
      <h1 class="text-3xl font-bold text-gray-800 mb-6">Dice Roller</h1>

      <!-- Dice Display -->
      <div
        id="diceDisplay"
        class="w-32 h-32 flex items-center justify-center bg-gray-800 text-white rounded-xl mb-6 shadow-lg text-5xl"
      >
        <!-- SVG will go here -->
      </div>

      <!-- Roll Button -->
      <button
        id="rollButton"
        class="bg-blue-600 hover:bg-blue-700 text-white font-semibold text-xl py-3 px-8 rounded-full shadow-md hover:-translate-y-1 hover:shadow-lg active:translate-y-0 active:shadow-sm transition-all duration-200"
      >
        Roll Dice
      </button>

      <!-- History -->
      <div class="mt-6 w-full">
        <h2 class="text-xl font-semibold text-gray-700 mb-3">Roll History</h2>
        <div
          id="historyList"
          class="bg-gray-50 p-4 rounded-xl max-h-40 overflow-y-auto border border-gray-200"
        >
          <p id="noHistoryMessage" class="text-gray-500 text-center py-4">
            No rolls yet.
          </p>
        </div>
      </div>
    </div>

    <script>
      const diceDisplay = document.getElementById("diceDisplay");
      const rollButton = document.getElementById("rollButton");
      const historyList = document.getElementById("historyList");
      const noHistoryMessage = document.getElementById("noHistoryMessage");

      const dotPositions = {
        1: [{ cx: 50, cy: 50 }],
        2: [
          { cx: 25, cy: 25 },
          { cx: 75, cy: 75 },
        ],
        3: [
          { cx: 25, cy: 25 },
          { cx: 50, cy: 50 },
          { cx: 75, cy: 75 },
        ],
        4: [
          { cx: 25, cy: 25 },
          { cx: 75, cy: 25 },
          { cx: 25, cy: 75 },
          { cx: 75, cy: 75 },
        ],
        5: [
          { cx: 25, cy: 25 },
          { cx: 75, cy: 25 },
          { cx: 50, cy: 50 },
          { cx: 25, cy: 75 },
          { cx: 75, cy: 75 },
        ],
        6: [
          { cx: 25, cy: 25 },
          { cx: 75, cy: 25 },
          { cx: 25, cy: 50 },
          { cx: 75, cy: 50 },
          { cx: 25, cy: 75 },
          { cx: 75, cy: 75 },
        ],
      };

      function createDiceSVG(value) {
        const dots = dotPositions[value] || dotPositions[1];
        const circles = dots
          .map(
            (d) =>
              `<circle cx="${d.cx}" cy="${d.cy}" r="10" fill="white"></circle>`
          )
          .join("");
        return `
        <svg viewBox="0 0 100 100" class="w-full h-full">
          <rect width="100" height="100" rx="15" ry="15" fill="#333"></rect>
          ${circles}
        </svg>
      `;
      }

      function addRollToHistory(result) {
        if (noHistoryMessage) noHistoryMessage.remove();
        const item = document.createElement("div");
        item.className =
          "flex items-center justify-between py-2 border-b border-gray-200 text-gray-700";
        const now = new Date();
        const time = now.toLocaleTimeString([], {
          hour: "2-digit",
          minute: "2-digit",
        });
        item.innerHTML = `<span class="font-medium">Roll: ${result}</span><span class="text-gray-500 text-sm">${time}</span>`;
        historyList.prepend(item);
        if (historyList.children.length > 10) historyList.lastChild.remove();
      }

      function rollDice() {
        rollButton.disabled = true;
        diceDisplay.classList.add("animate-shake");
        let count = 0;
        const interval = setInterval(() => {
          const temp = Math.floor(Math.random() * 6) + 1;
          diceDisplay.innerHTML = createDiceSVG(temp);
          if (++count >= 10) {
            clearInterval(interval);
            const final = Math.floor(Math.random() * 6) + 1;
            diceDisplay.innerHTML = createDiceSVG(final);
            diceDisplay.classList.remove("animate-shake");
            rollButton.disabled = false;
            addRollToHistory(final);
          }
        }, 100);
      }

      rollButton.addEventListener("click", rollDice);
      // Initial face
      diceDisplay.innerHTML = createDiceSVG(1);
    </script>
  </body>
</html>
